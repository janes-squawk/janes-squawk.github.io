let titleDiv = "Jane's Squawk!";
let subtitleDiv = "A (Virtual) Bird Walk Through Queens"
let bylineDiv = "with Stephen Albonesi & Ranna Zaman";

let footerDiv = 'Created for <a href="https://www.mas.org/janes-walk-nyc-2023/" target="_blank">Jane\'s Walk 2023</a><br>Made w/ <a href="https://github.com/mapbox/storytelling" target="_blank">Mapbox Template</a>, <a href="https://pointsunknown.nyc/web%20mapping/mapbox/2021/07/20/11A_MapboxStorytelling.html" target=_blank">Points Unknown</a> + Find us on <a href = "https://github.com/janes-squawk/janes-squawk.github.io" target="_blank">github</a>';

let divChapter0 = '<h3>Hello, thank you for your interest in our Jane\'s Walk!</h3><p>We\'re building out the site at the moment.</p><p>Please feel free to bookmark the page for now. <b>We look forward to sharing our walk with you right at the start of Jane\'s Walk weekend on May 5th!</b></p>';

let divChapter1 = '<h3>Welcome to our Jane\'s Walk! So glad you\'re joining us!</h3><p>We\'re two Queens residents who were inspired to learn more about the hundreds of birds that visit our borough every year, and which ones New Yorkers can expect to see this spring.</p><p>As you might have guessed, we\'re not professional birders! Rather, we\'re researchers, mapmakers, and data analysts who wanted to use these skills to tell a story about the incredible birds in our borough. In addition to understanding the geography, science, and numbers behind birds in Queens, we\'ll lead you on a virtual walk of the West Pond Trail of Jamaica Bay Wildlife Refuge, one of the best places to spot birds in New York City.</p>';

let divChapter2 = '<h3>First, a little context.</h3><p>Over 400 bird species have been documented in New York City, more than half the species regularly found in North America. Of these, over 370 species have been documented in Queens, more than any other borough according to <a href="https://ebird.org/about" target="_blank">eBird</a>, an open-source database managed by the Cornell Lab of Ornithology.</p><p>Jane\'s Walk is one of the best weekends of the year to spot many of these birds. That\'s because the festival happens in the middle of the spring bird migration, which occurs from about March to June in New York City for most birds, with a peak in May for shorebirds and most songbirds.</p>';

let divChapter3 = '<div class="beside"><div class="beside2"><img src="assets/images/Atlantic-Flyway-Map.jpg" alt="Atlantic Flyway"><p class="imageCredit">Source: U.S. Fish & Wildlife Service</p></div><p>The sheer number of birds in Queens is due in part to the borough\'s location along the Atlantic Flyway, one of four major north-south routes that birds travel in North America during the spring and fall migrations. The 3,000-mile route generally starts in Greenland and the Canadian Arctic, then follows the Atlantic coast through Canada and the United States to the tropical areas of the Caribbean and South America.</p></div>';

let divChapter4 = '<h3>Queens is for Birders</h3><p>Broadly, Queens boasts <a href="https://www.nycgovparks.org/sub_about/parks_divisions/nrg/documents/NRG_Publication_A_Guide_to_the_Birds_of_Queens.pdf" target="_blank">five distinct habitats</a>: field, forest, freshwater, salt marsh, and seashore&mdash;all with tremendous biodiversity, not the least in avian species (the “birdiest borough,” so says <a href="https://www.nycaudubon.org/events-birding/birding-resources/birding-in-nyc/birding-in-queens" target="_blank">NYC Audubon</a>!). From the eager chirping that signals morning (and for many of us, serves as a natural alarm clock!) to the flocks that fly in neat formation over buildings and bodies of water alike, birds are an ever-present neighbor.</p>';

let divChapter5 = '<h3>Habitat: Fields</h3><img src="assets/images/qns-wildflower-meadow-edward-mertz-qcc.jpg"><p class="imageCredit">Photo by <a href="https://www.qcc.cuny.edu/biologicalsciences/natureoncampus/index.html" target="_blank">Edward Mertz</a></p><p>Among fields that have been cleared of trees and where new growth has occurred are <a href="https://www.nycaudubon.org/our-work/conservation/habitat-protection/grasslands-and-capped-landfills" target="_blank">grasslands</a>. Although they are among the most endangered of habitats because of human development and remain rare <a href="https://www.nycgovparks.org/learn/ecosystems/grasslands-in-new-york-city-parks" target="_blank">in New York City</a>, infill sites that were underutilized have restored fields to the great benefit of nesting and migrating birds. Fields require maintenance for the managed growth and cultivation of native species as well as limited pesticide use. Where fields might meet another habitat, like a forest, the variety of plant species can attract more animals, including birds.</p>';

let divChapter6 = '<h3>Habitat: Forests</h3><img src="assets/images/trails-of-forest-park-raysawak-wikicommons.JPG"><p class="imageCredit">Photo by <a href="https://commons.wikimedia.org/wiki/File:Trails_of_Forest_Park.JPG" target="_blank">RaySawak</a> via Wikimedia Commons</p><p>Queens\' forest land consists of a variety of species of trees of varying maturity. This enables a diversity of bird species to take shelter and sustenance in vegetation across different niches, from the tallest tree canopies to the undergrowth beneath. <a href="https://nycaudubon.org/events-birding/birding-resources/birding-in-nyc/birding-in-queens/forest-park?&_ga=2.64092527.1737851004.1681271488-1871949272.1681271488#water-hole" target="_blank">Forest Park</a>, pictured here, is also on the site of an ancient glacier that left different elevations, resulting in present-day ponds, gullies, and one particularly popular “Water Hole” that draws migrating songbirds. To protect these critical breeding grounds and stopover locations for migrating birds, <a href="https://www.nycaudubon.org/our-work/conservation/habitat-protection/forests-and-upland-parks">forest conservation</a> is a necessity.</p>';

let divChapter7 = '<h3>Habitat: Freshwater</h3><img src="assets/images/flushing-meadows-willow-lake-2019-tdorante10-wikicommons.jpg"><p class="imageCredit">Photo by <a href="https://commons.wikimedia.org/wiki/File:Flushing_Meadows_Willow_Lake_td_(2019-04-10)_08.jpg" target="_blank">Tdorante10</a> via Wikimedia Commons</p><p>Freshwater habitats include lakes, ponds, and cattail marshes. Flushing Meadows-Corona Park\'s <a href="https://www.nycgovparks.org/parks/flushing-meadows-corona-park/highlights/11312" target="_blank">Willow Lake</a>, pictured here, and the marshes and meadows around it attract waterfowl, hawks, and other animals. Like the other habitats, freshwater wetlands are both home to native species and a migratory stop along the Atlantic flyway. Today, just <a href="https://www.nycgovparks.org/learn/ecosystems/wetlands-in-new-york-city-parks" target="_blank">one percent</a> of the city\'s historical wetlands remain, a sobering statistic given their important roles in ecosystems and stormwater flood mitigation.</p>';

let divChapter8 = '<h3>Habitat: Salt Marshes</h3><img src="assets/images/udalls-cove-virginia-point-udallscoveorg.jpg"><p class="imageCredit">Photo by <a href="https://www.udallscove.org/history" target="_blank">Udalls Cove Preservation Committee</a></p><p>Vegetation in salt marshes have acclimated to both freshwater and saltwater, and some segments will also regularly submerge under water. One particular species of grass, <a href="https://www.nycgovparks.org/parks/udalls-park-preserve/highlights/11328" target="_blank">saltmarsh cordgrass</a>, thrives in sediment-rich deposits along the shore and provides the added benefit of acting as a natural filtration system for debris, producing mud that adds biodiversity. Like fields, many of which were once salt marshes themselves, they are also at edges where one habitat will transition to another. Wetlands such as these have to contend not only with pollution and runoff that introduces additional debris in the water, but also <a href="https://www.nycaudubon.org/our-work/conservation/habitat-protection/coastal-wetlands-and-beaches" target="_blank">impermeable development</a> that continues to be built atop vulnerable watersheds.</p>';

let divChapter9 = '<h3>Habitat: Seashore</h3><img src="assets/images/piping-plover-and-new-chicks-wildlifenycgov.jpg"><p class="imageCredit">Photo by <a href="https://www.nyc.gov/site/wildlifenyc/animals/piping-plovers.page" target="_blank">WildlifeNYC</a></p><p>The Rockaway Penninsula is a hotspot for migratory birds in autumn. Unfortunately, certain species of birds that nest along beaches are threatened by encroaching human activity. On the southern side of the Breezy Point neighborhood is a federally designated protected area for piping plovers, a threatened or endangered species that has all but disappeared from some of its other habitats in the U.S.</p>';

let divChapter10 = '<h3>Now it\'s our turn!</h3><img src=""><p>With all this in mind, we set out for the West Pond Trail of Jamaica Bay Wildlife Refuge earlier this week to see if we could observe birds that we read about. The approximately two-mile trail is located in Broad Channel, an inhabited island in the middle of Jamaica Bay.</p><p>Jamaica Bay Wildlife Refuge is a spectacular oasis comprised of 9,000 acres (20 square miles) of open bay, saltmarsh, mudflats, upland fields and woodland, small freshwater ponds, and two brackish man-made impoundments. Part of the Gateway National Recreation Area, the Refuge is the U.S. Department of the Interior\'s only wildlife refuge administered by the National Park Service.</p>';

let divChapter11 = '<p>Over <a href="https://www.nycaudubon.org/events-birding/birding-resources/birding-in-nyc/birding-in-queens/jamaica-bay-wildlife-refuge" target="_blank">332 bird species</a> have been sighted at the refuge over the last 25 years, in addition to other native wildlife like horseshoe crabs, diamondback terrapin, and muskrats. Of these, approximately 70 bird species nest regularly at the refuge. In spring, Jamaica Bay is visited by numerous shorebirds, waterfowl, wading birds, terns, flycatchers, cuckoos, warblers, and tanagers, as well as the American Woodcock, which performs courtship displays by the Visitors Center at dusk.</p><p>Created in 1953 by the Parks Department to improve habitat diversity in Jamaica Bay, the brackish, 45-acre West Pond is known to be especially good for viewing migratory shorebirds in breeding plumage, including the black bellied and semipalmated plovers, red knot, and short-billed dowitcher.</p>';

let divChapter12 = '<img src="assets/images/stop-1.jpg"><p>We began our walk at 10am on a Monday morning. It was a clear and sunny day, with a strong breeze following the torrential rains of the weekend. The gravel trail began in an area with dense brush and the occasional tree. It was here that we immediately heard the rapid twittering of a House Wren.</p>';

let divChapter13 = '<img src="assets/images/stop-2.jpg"><p>Just a few hundred feet further, a clearing appeared to the left, revealing an expsansive salt marsh and the Rockaway Peninsula in the distance. Standing stoically in the salt flats was a Great Egret, its snow white feathers contrasting with the dull brown and greens of the marsh.</p><p>As we gazed southward, an Osprey soared overhead. And quietly, slowly, a flock of [pipers] waded through the mud, their bills prodding the ground for insects and other food.</p>';

let divChapter14 = '<p>Continuing through the scrub brush, we were startled when a Red-winged Blackbird flew down and perched prominently on a bush branch beside the trail. Almost in curiosity, it cocked its head back and forth in between  shrill "twee" calls. But our attention was quickly diverted by the stunning size of a [Ring-billed Gull or Herring Gull] that flapped overhead as it headed for the open bay.</p>';

let divChapter15 = '<img src="assets/images/stop-4.jpg"><p>Again, the trail gave way to an expansive view, this time of West Pond itself. Zipping and acrobatically changing direction as they flew above the pond were dozens of Tree Swallows, their blue-green feathers shimmering in the sunlight as they caught flies.</p><p>This was also our first glimpse of swimming birds; namely, Mallards and a flock of Bufflehead Ducks, with their unmistakable white and black bodies and tufted white heads.</p>';

let divChapter16 = '<p>As we curved clockwise around the eastern edge of the pond, we caught up to several other birders in an open area surrounded by dense green scrub brush. Together, we were ecstatic when a bright bird appeared through the foliage: a Scarlet Tanager. Its bright red plumage seemed to glow as it hopped its way around the bushes. Then another appeared. We were told that this was a relatively special bird to see.</p>';

let divChapter17 = '<img src="assets/images/stop-6.jpg"><p>At this point, anything else seemed like icing on the cake. So as we rounded the easternmost curve of the trail, we were excited to see dozens of Brants, their white bodies and black heads bobbing among the whitecaps of the bay.</p>';

let divChapter18 = '<p>As we re-entered the cover of the scrub brush, the high-pitched musical sounds of a Brown Thrasher and Song Sparrow filled the still air. And while we could not see the bright plumage of the Northern Cardinal, we heard its familiar call as well.</p>';

let divChapter19 = '<img src="assets/images/stop-8.jpg"><p>As we approached the halfway point of the walk, we encountered two familiar faces: Canada Geese. As with most of their kind, these two seemed unfazed by our presence, but perhaps it was because they appeared to be nesting.</p>';

let divChapter20 = '<p>Earlier, one of the fellow birders we encountered on the trail had encouraged us to be on the lookout for a bird that neither of us had heard of. As we progressed along the trail and its northern straightaway, we saw the bird--an Eastern Towhee--perched in a small tree next to the trail. And indeed, the small bird, with its bright orange belly and black-capped head, was a striking and gratifying one to see.</p>';

let divChapter22 = '<p>After rounding the final corner of the loop</p>';

var config = {
    style: 'mapbox://styles/mapbox/satellite-v9',
    accessToken: 'pk.eyJ1Ijoicm56ZWUiLCJhIjoiY2xnd3BsamtkMTJkZDNqa2xjaWhrcXY1dSJ9.Wnj9Xg4bX4AmEO05bTnTOw',
    showMarkers: false,
    markerColor: '#49C2FF',
    //projection: 'equirectangular',
    //Read more about available projections here
    //https://docs.mapbox.com/mapbox-gl-js/example/projections/
    inset: false,
    theme: 'light',
    use3dTerrain: false, //set true for enabling 3D maps.
    auto: false,
    title: titleDiv,
    subtitle: subtitleDiv,
    byline: bylineDiv,
    footer: footerDiv,
    chapters: [
      {
        id: "under-constr",
        alignment: "centered",
        hidden: false,
        chapterDiv: divChapter0,
        location: {
          center: [-74, 40.725],
          zoom: 10,
          zoomSmall: 9,
          pitch: 0,
          bearing: 0,
        },
        mapAnimation: "flyTo",
        rotateAnimation: false,
        callback: "",
        onChapterEnter: [],
        onChapterExit: [],
      },
        {
          id: "1-welcome",
          alignment: "centered",
          hidden: false,
          chapterDiv: divChapter1,
          location: {
            center: [-74, 40.725],
            zoom: 10,
            zoomSmall: 9,
            pitch: 0,
            bearing: 0,
          },
          mapAnimation: "flyTo",
          rotateAnimation: false,
          callback: "",
          onChapterEnter: [],
          onChapterExit: [],
        },
        {
            id: "2-context-i",
            alignment: "left",
            hidden: false,
            chapterDiv: divChapter2,
            location: {
              center: [-74, 40.725],
              zoom: 10,
              zoomSmall: 9,
              pitch: 0,
              bearing: 0,
            },
            mapAnimation: "flyTo",
            rotateAnimation: false,
            callback: "",
            onChapterEnter: [],
            onChapterExit: [],
          },
          {
            id: "2-context-ii",
            alignment: "full",
            hidden: false,
            chapterDiv: divChapter3,
            location: {
              center: [-74, 40.725],
              zoom: 10,
              zoomSmall: 9,
              pitch: 0,
              bearing: 0,
            },
            mapAnimation: "flyTo",
            rotateAnimation: false,
            callback: "",
            onChapterEnter: [],
            onChapterExit: [],
          },
          {
            id: "2-context-iii",
            alignment: "left",
            hidden: false,
            chapterDiv: divChapter4,
            location: {
              center: [-73.86707, 40.69039],
              zoom: 11,
              zoomSmall: 10,
              pitch: 0,
              bearing: 0,
            },
            mapAnimation: "flyTo",
            rotateAnimation: false,
            callback: "",
            onChapterEnter: [],
            onChapterExit: [],
          },
        {
            id: '3-habitat-fi',
            alignment: 'left',
            hidden: false,
            chapterDiv: divChapter5,
            location: {
                center: [-73.75762, 40.76089],
                pitch: 40.00,
                zoom: 18,
                zoomSmall: 16,
                bearing: 0.00
            },
            mapAnimation: 'flyTo',
            rotateAnimation: false,
            callback: '',
            onChapterEnter: [
                // {
                //     layer: 'layer-name',
                //     opacity: 1,
                //     duration: 5000
                // }
            ],
            onChapterExit: [
                // {
                //     layer: 'layer-name',
                //     opacity: 0
                // }
            ]
        },
        {
            id: '3-habitat-fo',
            alignment: 'left',
            hidden: false,
            chapterDiv: divChapter6,
            location: {
                center: [-73.84919, 40.70229],
                pitch: 40.00,
                zoom: 14.25,
                zoomSmall: 13,
                bearing: 0.00,
                // flyTo additional controls-
                // These options control the flight curve, making it move
                // slowly and zoom out almost completely before starting
                // to pan.
                //speed: 2, // make the flying slow
                //curve: 1, // change the speed at which it zooms out
            },
            mapAnimation: 'flyTo',
            rotateAnimation: false,
            callback: '',
            onChapterEnter: [],
            onChapterExit: []
        },
        {
            id: '3-habitat-fr',
            alignment: 'right',
            hidden: false,
            chapterDiv: divChapter7,
            location: {
                center: [-73.83533, 40.72785],
                pitch: 40.00,
                zoom: 14.25,
                zoomSmall: 13,
                bearing: 0.00
            },
            mapAnimation: 'flyTo',
            rotateAnimation: false,
            callback: '',
            onChapterEnter: [],
            onChapterExit: []
        },
        {
            id: '3-habitat-sa',
            alignment: 'left',
            hidden: false,
            chapterDiv: divChapter8,
            location: {
                center: [-73.74585, 40.77927],
                pitch: 40.00,
                zoom: 16.15,
                zoomSmall: 15,
                bearing: 0.00
            },
            mapAnimation: 'flyTo',
            rotateAnimation: false,
            callback: '',
            onChapterEnter: [],
            onChapterExit: []
        },
        {
            id: '3-habitat-sea',
            alignment: 'right',
            hidden: false,
            chapterDiv: divChapter9,
            location: {
                center: [-73.92195, 40.55287],
                pitch: 40.00,
                zoom: 14.25,
                zoomSmall: 13,
                bearing: 0.00
            },
            mapAnimation: 'flyTo',
            rotateAnimation: false,
            callback: '',
            onChapterEnter: [],
            onChapterExit: []
        },
        {
          id: '4-jw-intro-i',
          alignment: 'left',
          hidden: false,
          chapterDiv: divChapter10,
          location: {
              center: [-73.83030, 40.61819],
              pitch: 40.00,
              zoom: 14.25,
              bearing: 0.00
          },
          mapAnimation: 'flyTo',
          rotateAnimation: false,
          callback: '',
          onChapterEnter: [],
          onChapterExit: []
      },
      {
        id: '4-jw-intro-ii',
        alignment: 'right',
        hidden: false,
        chapterDiv: divChapter11,
        location: {
            center: [-73.83030, 40.61819],
            pitch: 40.00,
            zoom: 14.25,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: true,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-1',
        alignment: 'right',
        hidden: false,
        chapterDiv: divChapter12,
        location: {
            center: [-73.82563, 40.61656],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-2',
        alignment: 'left',
        hidden: false,
        chapterDiv: divChapter13,
        location: {
            center: [-73.82668, 40.61637],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-3',
        alignment: 'right',
        hidden: false,
        chapterDiv: divChapter14,
        location: {
            center: [-73.82792, 40.61625],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-4',
        alignment: 'left',
        hidden: false,
        chapterDiv: divChapter15,
        location: {
            center: [-73.82972, 40.61592],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-5',
        alignment: 'right',
        hidden: false,
        chapterDiv: divChapter16,
        location: {
            center: [-73.83458, 40.61658],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-6',
        alignment: 'left',
        hidden: false,
        chapterDiv: divChapter17,
        location: {
            center: [-73.83466, 40.61710],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-7',
        alignment: 'right',
        hidden: false,
        chapterDiv: divChapter18,
        location: {
            center: [-73.83433, 40.61794],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-8',
        alignment: 'right',
        hidden: false,
        chapterDiv: divChapter19,
        location: {
            center: [-73.83433, 40.61794],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-9',
        alignment: 'left',
        hidden: false,
        chapterDiv: divChapter20,
        location: {
            center: [-73.83130, 40.62135],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
      {
        id: 'walk-stop-10',
        alignment: 'right',
        hidden: false,
        chapterDiv: divChapter21,
        location: {
            center: [-73.82747, 40.62224],
            pitch: 40.00,
            zoom: 19,
            bearing: 0.00
        },
        mapAnimation: 'flyTo',
        rotateAnimation: false,
        callback: '',
        onChapterEnter: [],
        onChapterExit: []
      },
    ]
};
